// SVG background images
svg-background(uri, alt-uri, scale = 1)

	size = image-size(alt-uri)
	width = size[0] * scale
	height = size[1] * scale
	aspect = width / height

	font-size 1em // when working with font sizes we need to make sure we are using the default size

	background url(alt-uri) 0 0 no-repeat
	width width
	height height
	background-size(@width @height)
	filter s("progid:DXImageTransform.Microsoft.AlphaImageLoader(src=%s, sizingMethod='scale');", alt-uri)
	-ms-filter "progid:DXImageTransform.Microsoft.AlphaImageLoader(src=%s, sizingMethod='scale')" % alt-uri

	.svg &
		width (width / 16)em
		height (height / 16)em
		background-image url(uri)
		background-size(100% 100%)

// Use graphics acceleration
use-gfx()
	-webkit-transform unquote('translateZ(0)')
	text-shadow 0 0 1px rgba(offBlack, .5)

// The micro clearfix http://nicolasgallagher.com/micro-clearfix-hack/
clearfix()
	*zoom:1
	&:before,
	&:after
		content:""
		display:table
	&:after
		clear:both

hidden()
	display: none !important;
	visibility: hidden;

visuallyhidden()
	position: absolute !important;
	top: -9999px !important;
	left: -9999px !important;

invisible()
	visibility hidden

// MinHeight
// ---------
// Min height hack that works with ie6
min-height(height)
	min-height: height
	height:auto !important
	height: height


// IE7 inline-block
// ----------------
ie7-inline-block()
	*display: inline /* IE7 inline-block hack */
	*zoom: 1


// IE7 likes to collapse whitespace on either side of the inline-block elements.
// Ems because we're attempting to match the width of a space character. Left
// version is for form buttons, which typically come after other elements, and
// right version is for icons, which come before. Applying both is ok, but it will
// mean that space between those elements will be .6em (~2 space characters) in IE7,
// instead of the 1 space in other browsers.
ie7-restore-left-whitespace()
	*margin-left: .3em
	&:first-child
		*margin-left: 0
ie7-restore-right-whitespace()
	*margin-right: .3em
	&:last-child
		*margin-left: 0

// Text overflow
// -------------------------
// Requires inline-block or block for proper styling
text-overflow()
	overflow: hidden
	text-overflow: ellipsis
	white-space: nowrap


// CSS image replacement
// -------------------------
// Source: https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757
hide-text()
	font: unquote('0/0 a')
	color: transparent
	text-shadow: none
	background-color: transparent
	border: 0


// CSS3 PROPERTIES
// --------------------------------------------------

// Border Radius
border-radius()
	-webkit-border-radius: arguments
	-moz-border-radius: arguments
	border-radius: arguments


// Drop shadows
box-shadow()
	-webkit-box-shadow: arguments
	-moz-box-shadow: arguments
	box-shadow: arguments

// Animations
animation-name()
	-webkit-animation-name: arguments
	-moz-animation-name: arguments
	-ms-animation-name: arguments
	-o-animation-name: arguments
	animation-name: arguments

animation-duration()
	-webkit-animation-duration: arguments
	-moz-animation-duration: arguments
	-ms-animation-duration: arguments
	-o-animation-duration: arguments
	animation-duration: arguments

animation-timing-function()
	-webkit-animation-timing-function: arguments
	-moz-animation-timing-function: arguments
	-ms-animation-timing-function: arguments
	-o-animation-timing-function: arguments
	animation-timing-function: arguments

animation-iteration-count()
	-webkit-animation-iteration-count: arguments
	-moz-animation-iteration-count: arguments
	-ms-animation-iteration-count: arguments
	-o-animation-iteration-count: arguments
	animation-iteration-count: arguments

animation-direction()
	-webkit-animation-direction: arguments
	-moz-animation-direction: arguments
	-ms-animation-direction: arguments
	-o-animation-direction: arguments
	animation-direction: arguments

animation-delay()
	-webkit-animation-delay: arguments
	-moz-animation-delay: arguments
	-ms-animation-delay: arguments
	-o-animation-delay: arguments
	animation-delay: arguments


// Transitions
transition()
	-webkit-transition: arguments
	-moz-transition: arguments
	-ms-transition: arguments
	-o-transition: arguments
	transition: arguments

transition-property()
	-webkit-transition-property: arguments
	-moz-transition-property: arguments
	-ms-transition-property: arguments
	-o-transition-property: arguments
	transition-property: arguments

transition-duration()
	-webkit-transition-duration: arguments
	-moz-transition-duration: arguments
	-ms-transition-duration: arguments
	-o-transition-duration: arguments
	transition-duration: arguments

transition-timing-function()
	-webkit-transition-timing-function: arguments
	-moz-transition-timing-function: arguments
	-ms-transition-timing-function: arguments
	-o-transition-timing-function: arguments
	transition-timing-function: arguments


// Transformations
rotate(degrees)
	-webkit-transform: 'rotate(%s)' % degrees
	-moz-transform: 'rotate(%s)' % degrees
	-ms-transform: 'rotate(%s)' % degrees
	-o-transform: 'rotate(%s)' % degrees
	transform: 'rotate(%s)' % degrees

scale(ratio)
	-webkit-transform: 'scale(%s)' % ratio
	-moz-transform: 'scale(%s)' % ratio
	-ms-transform: 'scale(%s)' % ratio
	-o-transform: 'scale(%s)' % ratio
	transform: 'scale(%s)' % ratio

translate(x, y)
	-webkit-transform: 'translate(%s, %s)' % (x y)
	-moz-transform: 'translate(%s, %s)' % (x y)
	-ms-transform: 'translate(%s, %s)' % (x y)
	-o-transform: 'translate(%s, %s)' % (x y)
	transform: 'translate(%s, %s)' % (x y)

skew(x, y)
	-webkit-transform: 'skew(%s, %s)' % (x y)
	-moz-transform: 'skew(%s, %s)' % (x y)
	-ms-transform: 'skew(%s, %s)' % (x y)
	-o-transform: 'skew(%s, %s)' % (x y)
	transform: 'skew(%s, %s)' % (x y)

translate3d(x, y, z)
	-webkit-transform: 'translate(%s, %s, %s)' % (x y z)
	-moz-transform: 'translate(%s, %s, %s)' % (x y z)
	-ms-transform: 'translate(%s, %s, %s)' % (x y z)
	-o-transform: 'translate(%s, %s, %s)' % (x y z)
	transform: 'translate(%s, %s, %s)' % (x y z)


// Backface visibility
// Prevent browsers from flickering when using CSS 3D transforms.
// Default value is `visible`, but can be changed to `hidden
// See git pull https://github.com/dannykeane/bootstrap.git backface-visibility for examples
backface-visibility(visibility)
	-webkit-backface-visibility: visibility
	-moz-backface-visibility: visibility
	-ms-backface-visibility: visibility
	backface-visibility: visibility

// Background clipping
// Heads up: FF 3.6 and under need "padding" instead of "padding-box"
background-clip(clip)
	-webkit-background-clip: clip
	-moz-background-clip: clip
	background-clip: clip

// Background sizing
background-size(size)
	-webkit-background-size: size
	-moz-background-size: size
	-o-background-size: size
	background-size: size

// Box sizing
box-sizing(boxmodel)
	-webkit-box-sizing: boxmodel
	-moz-box-sizing: boxmodel
	-ms-box-sizing: boxmodel
	box-sizing: boxmodel

// User select
// For selecting text on the page
user-select(select)
	-webkit-user-select: select
	-moz-user-select: select
	-ms-user-select: select
	-o-user-select: select
	user-select: select

// Resize anything
resizable(direction)
	resize: direction // Options: horizontal, vertical, both
	overflow: auto // Safari fix


// CSS3 Content Columns
content-columns(columnCount, columnGap = gridGutterWidth)
	-webkit-column-count: columnCount
	-moz-column-count: columnCount
	column-count: columnCount
	-webkit-column-gap: columnGap
	-moz-column-gap: columnGap
	column-gap: columnGap

// Optional hyphenation
hyphens(mode = auto)
	word-wrap: break-word
	-webkit-hyphens: mode
	-moz-hyphens: mode
	-ms-hyphens: mode
	-o-hyphens: mode
	hyphens: mode

// Opacity
opacity(opacity)
	opacity: (opacity / 100)
	filter 'alpha(opacity=%s)' % opacity


// BACKGROUNDS
// --------------------------------------------------

// Add an alphatransparency value to any background or border color (via Elyse Holladay)
translucent-background($color = $white, $alpha = 1)
	background-color: hsla(hue($color), saturation($color), lightness($color), $alpha)

translucent-border($color = $white, $alpha = 1)
	border-color: hsla(hue($color), saturation($color), lightness($color), $alpha)
	background-clip(padding-box)

// Gradient Bar Colors for buttons and alerts
gradientBar(primaryColor, secondaryColor)
	gradient-vertical(primaryColor, secondaryColor)
	border-color: secondaryColor secondaryColor darkenWithLess(secondaryColor, 15%)
	border-color: rgba(0,0,0,.1) rgba(0,0,0,.1) fadein(rgba(0,0,0,.1), 15%)


// Gradients
gradient-horizontal($startColor = #555, $endColor = #333)
	background-color: $endColor
	background-image: -moz-linear-gradient(left, $startColor, $endColor) // FF 3.6+
	background-image: -ms-linear-gradient(left, $startColor, $endColor) // IE10
	background-image: -webkit-gradient(linear, 0 0, 100% 0, from($startColor), to($endColor)) // Safari 4+, Chrome 2+
	background-image: -webkit-linear-gradient(left, $startColor, $endColor) // Safari 5.1+, Chrome 10+
	background-image: -o-linear-gradient(left, $startColor, $endColor) // Opera 11.10
	background-image: linear-gradient(left, $startColor, $endColor) // Le standard
	background-repeat: repeat-x
	filter: s("progid:DXImageTransform.Microsoft.gradient(startColorstr='%s', endColorstr='%s', GradientType=1)",$startColor,$endColor) // IE9 and down

gradient-vertical($startColor = #555, $endColor = #333)
	background-color: mix($startColor, $endColor, 60%)
	background-image: -moz-linear-gradient(top, $startColor, $endColor) // FF 3.6+
	background-image: -ms-linear-gradient(top, $startColor, $endColor) // IE10
	background-image: -webkit-gradient(linear, 0 0, 0 100%, from($startColor), to($endColor)) // Safari 4+, Chrome 2+
	background-image: -webkit-linear-gradient(top, $startColor, $endColor) // Safari 5.1+, Chrome 10+
	background-image: -o-linear-gradient(top, $startColor, $endColor) // Opera 11.10
	background-image: linear-gradient(top, $startColor, $endColor) // The standard
	background-repeat: repeat-x
	filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='%s', endColorstr='%s', GradientType=0)" % ($startColor $endColor) // IE9 and down

gradient-directional($startColor = #555, $endColor = #333, $deg = 45deg)
	background-color: $endColor
	background-repeat: repeat-x
	background-image: -moz-linear-gradient($deg, $startColor, $endColor) // FF 3.6+
	background-image: -ms-linear-gradient($deg, $startColor, $endColor) // IE10
	background-image: -webkit-linear-gradient($deg, $startColor, $endColor) // Safari 5.1+, Chrome 10+
	background-image: -o-linear-gradient($deg, $startColor, $endColor) // Opera 11.10
	background-image: linear-gradient($deg, $startColor, $endColor) // The standard

gradient-vertical-three-colors($startColor = #00b3ee, $midColor = #7a43b6, $colorStop = 50%, $endColor = #c3325f)
	background-color: mix($midColor, $endColor, 80%)
	background-image: -webkit-gradient(linear, 0 0, 0 100%, from($startColor), color-stop($colorStop, $midColor), to($endColor))
	background-image: -webkit-linear-gradient($startColor, $midColor $colorStop, $endColor)
	background-image: -moz-linear-gradient(top, $startColor, $midColor $colorStop, $endColor)
	background-image: -ms-linear-gradient($startColor, $midColor $colorStop, $endColor)
	background-image: -o-linear-gradient($startColor, $midColor $colorStop, $endColor)
	background-image: linear-gradient($startColor, $midColor $colorStop, $endColor)
	background-repeat: no-repeat
	filter: s("progid:DXImageTransform.Microsoft.gradient(startColorstr='%s', endColorstr='%s', GradientType=0)",$startColor,$endColor) // IE9 and down, gets no color-stop at all for proper fallback

gradient-radial($innerColor = #555, $outerColor = #333)
	background-color: $outerColor
	background-image: -webkit-gradient(radial, center center, 0, center center, 460, from($innerColor), to($outerColor))
	background-image: -webkit-radial-gradient(circle, $innerColor, $outerColor)
	background-image: -moz-radial-gradient(circle, $innerColor, $outerColor)
	background-image: -ms-radial-gradient(circle, $innerColor, $outerColor)
	background-image: -o-radial-gradient(circle, $innerColor, $outerColor)
	background-repeat: no-repeat

gradient-striped($color, $angle = top left)
	background-color: $color
	background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(.25, rgba(255,255,255,.15)), color-stop(.25, transparent), color-stop(.5, transparent), color-stop(.5, rgba(255,255,255,.15)), color-stop(.75, rgba(255,255,255,.15)), color-stop(.75, transparent), to(transparent))
	background-image: -webkit-linear-gradient($angle, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%, transparent)
	background-image: -moz-linear-gradient($angle, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%, transparent)
	background-image: -ms-linear-gradient($angle, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%, transparent)
	background-image: -o-linear-gradient($angle, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%, transparent)
	background-image: linear-gradient($angle, rgba(255,255,255,.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,.15) 50%, rgba(255,255,255,.15) 75%, transparent 75%, transparent)

// Reset filters for IE
reset-filter()
	filter: s("progid:DXImageTransform.Microsoft.gradient(enabled = false)")

// Button backgrounds
// ------------------
buttonBackground(startColor, endColor)
	// gradientBar will set the background to a pleasing blend of these, to support IE<=9
	gradientBar(startColor, endColor)
	*background-color: endColor /* Darken IE7 buttons by default so they stand out more given they won't have borders */
	reset-filter()

	// in these cases the gradient won't cover the background, so we override
	&:hover, &:active, &.active, &.disabled, &[disabled]
		background-color: endColor
		*background-color: darkenWithLess(endColor, 5%)

	// IE 7 + 8 can't handle box-shadow to show active, so we darken a bit ourselves
	&:active,
	&.active
		background-color: darkenWithLess(endColor, 10%) unquote('\9')


// Popover arrows
// -------------------------
// For tipsies and popovers
arrow-bottom($arrowWidth = 5px, $arrowColor = black)
	top 100%
	left: 50%
	margin-left: (- $arrowWidth)
	margin-bottom: (- $arrowWidth)
	border-left: $arrowWidth solid transparent
	border-right: $arrowWidth solid transparent
	border-top: $arrowWidth solid $arrowColor

arrow-right($arrowWidth = 5px, $arrowColor = black)
	top: 50%
	left 100%
	margin-top: (- $arrowWidth)
	margin-right: (- $arrowWidth)
	border-top: $arrowWidth solid transparent
	border-bottom: $arrowWidth solid transparent
	border-left: $arrowWidth solid $arrowColor

arrow-top($arrowWidth = 5px, $arrowColor = black)
	bottom 100%
	left: 50%
	margin-left: (- $arrowWidth)
	margin-top: (- $arrowWidth)
	border-left: $arrowWidth solid transparent
	border-right: $arrowWidth solid transparent
	border-bottom: $arrowWidth solid $arrowColor

arrow-left($arrowWidth = 5px, $arrowColor = black)
	top: 50%
	right 100%
	margin-top: (- $arrowWidth)
	margin-left: (- $arrowWidth)
	border-top: $arrowWidth solid transparent
	border-bottom: $arrowWidth solid transparent
	border-right: $arrowWidth solid $arrowColor
